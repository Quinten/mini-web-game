(()=>{var e=Object.freeze({addIcons:e=>{let t=document.createElement("canvas");t.width=1024,t.height=1024;let a=t.getContext("2d");e?e(a):(a.fillStyle="white",a.fillRect(0,0,1024,1024),a.fillStyle="lightblue",a.fillRect(256,256,512,512));let n=t.toDataURL(),c=document.createElement("link");c.rel="icon",c.type="image/png",c.href=n,document.head.appendChild(c);let l=document.createElement("link");l.rel="apple-touch-icon",l.href=n,document.head.appendChild(l);let s=document.title,o=document.querySelector("[name=description]").getAttribute("content"),r=document.body.style.background,i=document.createElement("meta");i.name="theme-color",i.content=r,document.head.appendChild(i);let d=window.location.href,h=d.replace(/[^/]+$/,""),m=[{src:n,type:"image/png",sizes:"1024x1024"}],p=document.createElement("link");p.rel="manifest",p.href="data:application/json,"+JSON.stringify({name:s,short_name:s,description:o,background_color:r,theme_color:r,display:"standalone",start_url:d,scope:h,icons:m}),document.head.appendChild(p)}});let t={},a=["preupdate","update","postupdate","draw"];a.forEach(e=>{t[e]={}});var n=Object.freeze({systems:t,systemTypes:a,addComponents:e=>{Object.keys(e).forEach(n=>{a.forEach(a=>{void 0!==e[n][a]&&(t[a][n]=e[n][a])})})}}),c=Object.freeze({game:(t,a,c)=>{e.addIcons(c);let{systems:l,systemTypes:s,addComponents:o}=n;o(a);let r={},i=canvas.getContext("2d"),d=0,h=0,m=e=>{h=e-d,d=e,s.forEach(e=>{r[e]=[]}),t.system.states.forEach(a=>{t[a].state.entities.forEach(n=>{let c=t[n];Object.keys(c).forEach(o=>{let d=c[o];s.forEach(s=>{void 0!==l[s][o]&&r[s].push({system:l[s][o],c:{entities:t,id:n,entity:c,comp:o,component:d,stateId:a,delta:h,time:e,ctx:i}})})})})}),s.forEach(e=>{r[e].forEach(e=>{let{system:t,c:a}=e;t(a)})}),requestAnimationFrame(m)};m(0)}});let l=["index.html"];var s=Object.freeze({start:e=>{let t=void 0===e?"mwg":e,a=e=>{let t=new Request(e,{cache:"reload"});if("cache"in t)return t;let a=new URL(e,self.location.href);return a.search+=(a.search?"&":"")+"cachebust="+Date.now(),new Request(a)};self.addEventListener("install",e=>{e.waitUntil(caches.open(t).then(e=>e.addAll(l)).then(self.skipWaiting()))}),self.addEventListener("activate",e=>{let a=[t];e.waitUntil(caches.keys().then(e=>e.filter(e=>!a.includes(e))).then(e=>Promise.all(e.map(e=>caches.delete(e)))).then(()=>self.clients.claim()))}),self.addEventListener("fetch",e=>{e.respondWith(fetch(a(e.request.url)).then(a=>(caches.open(t).then(t=>t.put(e.request.url,a.clone())),a.clone())).catch(t=>caches.match(e.request.url)))})},PRECACHE_URLS:l});let{game:o}=c,{start:r,PRECACHE_URLS:i}=Object.freeze({game:o,sw:s}).sw;i.push(...[]),r("mini-web-game")})();