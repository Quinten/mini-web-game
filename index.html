<!doctype html><html lang="en"><head><meta charset="utf-8"><title>pg</title><meta name="description" content=""><meta name="author" content="Quinten Clause"><meta name="monetization" content="$ilp.uphold.com/N3GyWXpENLq4"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"></head><body style="background:#000;color:#fff;margin:0;"> <canvas id="canvas" style="display:block;touch-action:none;user-select:none;-webkit-tap-highlight-color:transparent;"></canvas> <script type="module">var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},i=e.parcelRequire1533;null==i&&((i=function(e){if(e in t)return t[e].exports;if(e in n){var i=n[e];delete n[e];var a={id:e,exports:{}};return t[e]=a,i.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},e.parcelRequire1533=i);var a=Object.freeze({addIcons:e=>{let t=document.createElement("canvas");t.width=1024,t.height=1024;let n=t.getContext("2d");n.fillStyle="white",n.fillRect(0,0,1024,1024),n.fillStyle="lightblue",n.fillRect(256,256,512,512);let i=t.toDataURL(),a=document.createElement("link");a.rel="icon",a.type="image/png",a.href=i,document.head.appendChild(a);let r=document.createElement("link");r.rel="apple-touch-icon",r.href=i,document.head.appendChild(r);let o=document.title,l=document.title,c=document.querySelector("[name=description]").getAttribute("content"),s=document.body.style.background,d=document.createElement("meta");d.name="theme-color",d.content=s,document.head.appendChild(d);let p=s,u=window.location.href,m=u.replace(/[^/]+$/,""),h=[{src:i,type:"image/png",sizes:"1024x1024"}],f=document.createElement("link");f.rel="manifest",f.href="data:application/json,"+JSON.stringify({name:o,short_name:l,description:c,background_color:p,theme_color:s,display:"standalone",start_url:u,scope:m,icons:h}),document.head.appendChild(f)}}),r={system:{states:["game","test"]},game:{state:{entities:["viewport","input"]}},viewport:{resize:{width:300,height:150,minWidth:256,minHeight:256}},input:{pointer:{}},player:{fillrect:{fill:"white",x:8,y:8,width:240,height:240},sound:{melody:["8C3","8D3","8G3+8"]},data:{nClicks:0}},enemy:{fillrectx:{fill:"white",x:8,y:8,width:240,height:240},sound:{melody:["8G3","8D3","4C3"]}},test:{state:{entities:["player"]}},testx:{state:{entities:["enemy"]}}};let o={},l=document.title+" Data ";var c=Object.freeze({preupdate:e=>{let{id:t,entity:n}=e;if(void 0===o[t]){let e=localStorage.getItem(l+t);null!==e&&(o[t]=e,n.data=JSON.parse(e))}},postupdate:e=>{let{id:t,entity:n}=e,i=JSON.stringify(n.data);o[t]!==i&&(o[t]=i,localStorage.setItem(l+t,i))}});var s=Object.freeze({draw:e=>{let{ctx:t}=e,{x:n,y:i,width:a,height:r,fill:o}=e.component;t.fillStyle=o,t.fillRect(n,i,a,r)},update:e=>{let{pointer:t}=e.entities.input,{component:n,entity:i}=e,{x:a,y:r,width:o,height:l}=n;t.x<a||t.x>o+a||t.y<r||t.y>l+r||(t.pointing=!0,n.fill=t.isDown?"lightblue":"white",t.justUp&&void 0!==i.sound&&(i.sound.play=!0),t.justUp&&(i.data.nClicks=i.data.nClicks+1,e.entities.system.states=["game","testx"]))}});var d=Object.freeze({draw:e=>{let{ctx:t}=e,{x:n,y:i,width:a,height:r,fill:o}=e.component;t.fillStyle=o,t.fillRect(n,i,a,r)},update:e=>{let{pointer:t}=e.entities.input,{component:n,entity:i}=e,{x:a,y:r,width:o,height:l}=n;t.x<a||t.x>o+a||t.y<r||t.y>l+r||(t.pointing=!0,n.fill=t.isDown?"gold":"tomato",t.justUp&&(e.entities.system.states=["game","test"]))}});let p,u,m,h,f,g,y,v=0,w=(e=138)=>{if(void 0===p||"running"!==p.state){if(p=new AudioContext,/(iPhone|iPad)/i.test(navigator.userAgent)&&48e3!==p.sampleRate){let e=p.createBuffer(1,1,48e3),t=p.createBufferSource();t.buffer=e,t.connect(p.destination),t.start(0),t.disconnect(),p.close(),p=new AudioContext}m=p.createBiquadFilter(),m.connect(p.destination),m.type="lowpass",m.frequency.value=920,h=p.createGain(),h.connect(m),h.gain.value=.8,f=p.createDelay(60/e),f.delayTime.value=60/e,g=p.createGain(),g.gain.value=.25,f.connect(g),g.connect(f),y=p.createGain(),y.gain.value=.5,y.connect(h),f.connect(y),u=[0,1,2,3,4,5,6,7].map((()=>{let e=p.createGain();return e.connect(h),e.connect(f),e}))}},x=(e,t,n,i=120,a="triangle")=>{if("closed"===e.context.state)return;let r=t.split("+"),o=r[0].replace(/\d/g,""),l=r.reduce(((e,t)=>e+1/Number(t.match(/^\d+/g)[0])*240/i),0),c=r[0].match(/\d+$/g);c=c?+c[0]:4;let s="AbBCdDeEFgGa".indexOf(o);if(-1===s)return l;let d=100*s+1200*(c-4),p=e.context.createOscillator();return p.connect(e),p.frequency.value=440,p.detune.value=d,p.type=a,e.gain.setValueAtTime(0,n),e.gain.linearRampToValueAtTime(.6,n+.03*l),e.gain.setValueAtTime(.56,n+.24*l),e.gain.setValueAtTime(.55,n+.3*l),e.gain.linearRampToValueAtTime(0,n+1.5*l),p.start(n),p.stop(n+1.5*l),l};var b=Object.freeze({preupdate:e=>{let{component:t}=e;if(!t.play)return;let{melody:n,bpm:i=120,loop:a=!1,nextNote:r=0,nextNoteTick:o=p.currentTime}=t;w(i);let l=60/i*7;for(p.currentTime>o+.35&&(r=0,o=p.currentTime);o<p.currentTime+l;){let e=x(u[v],n[r],o,i);if(v=(v+1)%u.length,r=(r+1)%n.length,o+=e,0===r&&!a){t.play=!1;break}}t.nextNote=r,t.nextNoteTick=o},initCtx:w});let E=!1,j=!1;var O=Object.freeze({preupdate:e=>{!1===j&&((e=>{let t,n,i,a,r=e.component,o=e.entities.viewport.resize,l=!1,c=0,s=0,d=e=>{t=canvas.getBoundingClientRect(),n=t.left,i=t.top,a=o.zoom/window.devicePixelRatio,c=(e.clientX-n)/a,s=(e.clientY-i)/a,r.x=c,r.y=s};canvas.addEventListener("pointerdown",(e=>{!1!==e.isPrimary&&(d(e),r.downX=c,r.downY=s,r.justDown=!0,r.isDown=!0,l=!1,b.initCtx())})),canvas.addEventListener("pointermove",(e=>{!1!==e.isPrimary&&d(e)})),canvas.addEventListener("pointerup",(e=>{l?l=!1:!1!==e.isPrimary&&(d(e),r.justUp=!0,r.isDown=!1)})),canvas.addEventListener("pointerout",(e=>{r.isDown&&(r.justUp=!0,r.isDown=!1)})),canvas.addEventListener("pointerenter",(e=>{l=!0}))})(e),j=!0);let{component:t}=e;E=t.pointing,t.pointing=!1},postupdate:e=>{let{component:t}=e;t.justDown=!1,t.justUp=!1,E&&!t.pointing?canvas.style.cursor="default":!E&&t.pointing&&(canvas.style.cursor="pointer")}});let T=0,C=0,R=1,k=1,D=1,z=e=>{let{ctx:t}=e;t.restore(),t.save(),t.scale(D,D)};var S=Object.freeze({preupdate:e=>{if(T===window.innerWidth&&C===window.innerHeight)return;T=window.innerWidth,C=window.innerHeight,canvas.style.width=T+"px",canvas.style.height=C+"px",canvas.width=T*window.devicePixelRatio,canvas.height=C*window.devicePixelRatio;let{component:t}=e;t.width=T,t.height=C,R=t.minWidth/t.minHeight,k=T/C,D=R<k?canvas.height/t.minHeight:canvas.width/t.minWidth,t.zoom=D},draw:e=>{let{ctx:t}=e;z(e),t.clearRect(0,0,T,C)},flush:z}),U=Object.freeze({data:c,fillrect:s,fillrectx:d,pointer:O,resize:S,sound:b});let A={},N=["preupdate","update","postupdate","draw"];N.forEach((e=>{A[e]={}})),Object.keys(U).forEach((e=>{N.forEach((t=>{void 0!==U[e][t]&&(A[t][e]=U[e][t])}))}));var L=Object.freeze({systems:A,systemTypes:N});a.addIcons();var P;i.register("45FFh",(function(e,t){var n,i,a,r,o;n=e.exports,i="getBundleURL",a=()=>o,r=e=>o=e,Object.defineProperty(n,i,{get:a,set:r,enumerable:!0,configurable:!0});var l={};function c(e){return(""+e).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}o=function(e){var t=l[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(e)return c(e[2])}return"/"}(),l[e]=t),t}})),P=i("45FFh").getBundleURL("cmSNU")+"sw.js";try{"serviceWorker"in navigator&&window.addEventListener("load",(e=>{navigator.serviceWorker.register(P)}))}catch(e){}let{systems:F,systemTypes:q}=L,B={},G=canvas.getContext("2d"),W=0,_=0,H=e=>{_=e-W,W=e,q.forEach((e=>{B[e]=[]})),r.system.states.forEach((t=>{r[t].state.entities.forEach((n=>{let i=r[n];Object.keys(i).forEach((a=>{let o=i[a];q.forEach((l=>{void 0!==F[l][a]&&B[l].push({system:F[l][a],c:{entities:r,id:n,entity:i,comp:a,component:o,stateId:t,delta:_,time:e,ctx:G}})}))}))}))})),q.forEach((e=>{B[e].forEach((e=>{let{system:t,c:n}=e;t(n)}))})),requestAnimationFrame(H)};H(0);</script> </body></html>